{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchPhotos(params) {\n  const response = await axios.get('https://pixabay.com/api/', { params });\n  console.log(response.config.url);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nlet lightbox = null;\n\nexport async function renderPhotos(photos) {\n  const galleryList = document.querySelector('.gallery-list');\n\n  const markup = await photos\n    .map(photo => {\n      return `\n      <li class=\"photo-item\">\n        <a href=\"${photo.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" width=\"360\" height=\"152\" />\n        </a>\n        <div class=\"info\">\n          <div class=\"info-item\">\n            <p>Likes</p>\n            <p>${photo.likes}</p>\n          </div>\n          <div class=\"info-item\">\n            <p>Views</p>\n            <p>${photo.views}</p>\n          </div>\n          <div class=\"info-item\">\n            <p>Comments</p>\n            <p>${photo.comments}</p>\n          </div>\n          <div class=\"info-item\">\n            <p>Downloads</p>\n            <p>${photo.downloads}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-item', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n","import { fetchPhotos } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst fetchSubmit = document.querySelector('.form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loadButton = document.querySelector('.load-button');\nconst galleryList = document.querySelector('.gallery-list');\n\nlet page = 1;\nlet perPage = 15;\nlet totalHits = 0;\nlet searchRequest = '';\n\nfetchSubmit.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchRequest = searchInput.value.trim();\n  page = 1;\n  galleryList.innerHTML = '';\n  loadButton.style.display = 'none';\n  await loadPhotos();\n});\n\nloadButton.addEventListener('click', async () => {\n  await loadPhotos();\n\n  const photoItem = document.querySelector('.photo-item');\n  if (photoItem) {\n    const itemHeight = photoItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n});\n\nasync function loadPhotos() {\n  if (!searchRequest) return;\n\n  gallery.style.display = 'block';\n  const searchParams = {\n    key: '47040880-6387dd83a064ed0d7a9fde087',\n    q: searchRequest,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  };\n\n  try {\n    const photos = await fetchPhotos(searchParams);\n    gallery.style.display = 'none';\n    if (photos.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found. Try again with a different query.',\n      });\n      return;\n    }\n\n    totalHits = photos.totalHits;\n    await renderPhotos(photos.hits);\n    page++;\n\n    if (page * perPage >= totalHits) {\n      loadButton.style.display = 'none';\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadButton.style.display = 'block';\n    }\n  } catch (error) {\n    gallery.style.display = 'none';\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong. Error: ${error.message}`,\n    });\n  }\n}\n\niziToast.settings({\n  timeout: 10000,\n  position: 'topRight',\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n"],"names":["fetchPhotos","params","response","axios","lightbox","renderPhotos","photos","galleryList","markup","photo","SimpleLightbox","fetchSubmit","searchInput","gallery","loadButton","page","perPage","totalHits","searchRequest","event","loadPhotos","photoItem","itemHeight","searchParams","iziToast","error"],"mappings":"owBAEO,eAAeA,EAAYC,EAAQ,CACxC,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAAE,OAAAF,CAAM,CAAE,EACvE,eAAQ,IAAIC,EAAS,OAAO,GAAG,EACxBA,EAAS,IAClB,CCJA,IAAIE,EAAW,KAER,eAAeC,EAAaC,EAAQ,CACzC,MAAMC,EAAc,SAAS,cAAc,eAAe,EAEpDC,EAAS,MAAMF,EAClB,IAAIG,GACI;AAAA;AAAA,mBAEMA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,iBAK3CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,iBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,YAI3B,EACA,KAAK,EAAE,EAEVF,EAAY,mBAAmB,YAAaC,CAAM,EAE7CJ,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIM,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CCzCA,MAAMC,EAAc,SAAS,cAAc,OAAO,EAC5CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,cAAc,EAClDP,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIQ,EAAO,EACPC,EAAU,GACVC,EAAY,EACZC,EAAgB,GAEpBP,EAAY,iBAAiB,SAAU,MAAMQ,GAAS,CACpDA,EAAM,eAAc,EACpBD,EAAgBN,EAAY,MAAM,OAClCG,EAAO,EACPR,EAAY,UAAY,GACxBO,EAAW,MAAM,QAAU,OAC3B,MAAMM,EAAU,CAClB,CAAC,EAEDN,EAAW,iBAAiB,QAAS,SAAY,CAC/C,MAAMM,EAAU,EAEhB,MAAMC,EAAY,SAAS,cAAc,aAAa,EACtD,GAAIA,EAAW,CACb,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CAAC,EAED,eAAeF,GAAa,CAC1B,GAAI,CAACF,EAAe,OAEpBL,EAAQ,MAAM,QAAU,QACxB,MAAMU,EAAe,CACnB,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAD,CACJ,EAEE,GAAI,CACF,MAAMT,EAAS,MAAMN,EAAYuB,CAAY,EAE7C,GADAV,EAAQ,MAAM,QAAU,OACpBP,EAAO,KAAK,SAAW,EAAG,CAC5BkB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oDACjB,CAAO,EACD,MACD,CAEDP,EAAYX,EAAO,UACnB,MAAMD,EAAaC,EAAO,IAAI,EAC9BS,IAEIA,EAAOC,GAAWC,GACpBH,EAAW,MAAM,QAAU,OAC3BU,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACjB,CAAO,GAEDV,EAAW,MAAM,QAAU,OAE9B,OAAQW,EAAO,CACdZ,EAAQ,MAAM,QAAU,OACxBW,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gCAAgCC,EAAM,OAAO,EAC5D,CAAK,CACF,CACH,CAEAD,EAAS,SAAS,CAChB,QAAS,IACT,SAAU,WACV,aAAc,GACd,KAAM,iBACN,aAAc,UACd,cAAe,UACjB,CAAC"}